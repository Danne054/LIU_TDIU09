#include <vector>
#include <iostream>
#include <iomanip>
#include <string>
#include <cctype>
#include <algorithm>

using namespace std;

struct Chips_And_Amount
{
  int chips_amount;
  string chips;
};

using Chips_Input_List_Type = vector<Chips_And_Amount>;
using Chip_Stack_Type = vector<string>;
using Chips_Amount_Type = vector<int>;

void sort_chips(Chips_Input_List_Type & chips_input_list
		,Chip_Stack_Type & chip_stack
		,int chips_max_amount)
{
  for (int j{chips_max_amount + 1};  j >= 0; --j) //lägg till 1 så det först värdet som jämförs med är max_chip_mängd +1 -1
    {
      for (int i{static_cast<int>(chips_input_list.size() -1)}; i >= 0; --i)
	{
	  if (j == chips_input_list.at(i).chips_amount and
	      chips_input_list.at(i).chips_amount > 0)
	    {
	      chip_stack.push_back(chips_input_list.at(i).chips);
	      --chips_input_list.at(i).chips_amount;
	    }
	}
    }
}

void read_chips(Chip_Stack_Type & chip_stack)
{
  int i{}, chips_max_amount{};
  char c;
  Chips_And_Amount chpis_data;
  Chips_Input_List_Type chips_input_list;
  Chips_Amount_Type chips_amount_sorted;
  
  do
    {
      ++i;
      cout << "Chip bag " << i << ": " << flush;
      cin >> chpis_data.chips_amount;
      
      if (chpis_data.chips_amount != -1)
	{
	  cin.get(c);
	  getline(cin, chpis_data.chips);
	  
	  chips_input_list.push_back(chpis_data);
	  chips_amount_sorted.push_back(chpis_data.chips_amount);
	}
    }
  while (chpis_data.chips_amount != -1);

  if (chips_input_list.size() > 0)
    {
      sort(begin(chips_amount_sorted), end(chips_amount_sorted));
      chips_max_amount = chips_amount_sorted.back();
  
      sort_chips(chips_input_list, chip_stack, chips_max_amount);
      chips_input_list.clear();
    }
}

void print_chips(Chip_Stack_Type const& chip_stack)
{
  int totalSize{static_cast<int>(chip_stack.size())};
  
  if (totalSize != 0)
    {
      for (int i{}; i < totalSize; ++i)
	{
	  cout << chip_stack.at(i) << endl;
	}
    }
}

void eat_chips(Chip_Stack_Type & chip_stack,
	       int const eat_chips)
{
  int size{static_cast<int>(chip_stack.size()) - 1};
  
  if (size > 0)
    {
      chip_stack.erase(chip_stack.begin(), chip_stack.begin() + eat_chips);
    }
}

// Huvudprogrammet nedan får inte ändras
int main()
{
  Chip_Stack_Type chip_stack;
  int nr;
  
  read_chips(chip_stack);
  print_chips(chip_stack);

  cout <<"Chips to eat: ";
  cin >> nr;
  
  eat_chips(chip_stack, nr);
  print_chips(chip_stack);
  
  return 0;
}
